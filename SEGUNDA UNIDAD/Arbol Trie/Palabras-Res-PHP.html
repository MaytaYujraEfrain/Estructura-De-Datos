<!DOCTYPE html>
<html>
<head>
  <title>Autocompletador con Trie - Palabras reservadas de PHP</title>
  <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">
  <style>
    .suggestion-item {
      cursor: pointer;
      padding: 0.5rem;
      transition: background-color 0.3s ease;
    }

    .suggestion-item:hover {
      background-color: #f5f5f5;
    }
  </style>
</head>
<body>
  <div class="container my-5">
    <h1 class="mb-4">Autocompletador con Trie - Palabras reservadas de PHP</h1>
    <div class="form-group">
      <input type="text" class="form-control" id="inputField" placeholder="Escribe aquÃ­..." />
    </div>
    <ul class="list-unstyled" id="suggestionList"></ul>
  </div>

  <script>
    class TrieNode {
      constructor() {
        this.children = {};
        this.isEndOfWord = false;
      }
    }

    class Trie {
      constructor() {
        this.root = new TrieNode();
      }

      insert(word) {
        let node = this.root;
        for (let i = 0; i < word.length; i++) {
          const char = word[i];
          if (!node.children[char]) {
            node.children[char] = new TrieNode();
          }
          node = node.children[char];
        }
        node.isEndOfWord = true;
      }

      search(word) {
        let node = this.root;
        for (let i = 0; i < word.length; i++) {
          const char = word[i];
          if (!node.children[char]) {
            return false;
          }
          node = node.children[char];
        }
        return node.isEndOfWord;
      }

      startsWith(prefix) {
        let node = this.root;
        for (let i = 0; i < prefix.length; i++) {
          const char = prefix[i];
          if (!node.children[char]) {
            return [];
          }
          node = node.children[char];
        }
        return this.getAllWords(node, prefix);
      }

      getAllWords(node, prefix) {
        const words = [];
        this.dfs(node, prefix, words);
        return words;
      }

      dfs(node, prefix, words) {
        if (node.isEndOfWord) {
          words.push(prefix);
        }
        for (const char in node.children) {
          this.dfs(node.children[char], prefix + char, words);
        }
      }
    }

    const trie = new Trie();
    const phpReservedWords = [
      "abstract", "and", "array", "as", "break", "callable", "case", "catch", "class", "clone", "const", "continue",
      "declare", "default", "die", "do", "echo", "else", "elseif", "empty", "enddeclare", "endfor", "endforeach",
      "endif", "endswitch", "endwhile", "eval", "exit", "extends", "final", "for", "foreach", "function", "global",
      "goto", "if", "implements", "include", "include_once", "instanceof", "insteadof", "interface", "isset", "list",
      "namespace", "new", "or", "print", "private", "protected", "public", "require", "require_once", "return",
      "static", "switch", "throw", "trait", "try", "unset", "use", "var", "while", "xor", "yield"
    ];

    phpReservedWords.forEach((word) => {
      trie.insert(word);
    });

    const inputField = document.getElementById("inputField");
    const suggestionList = document.getElementById("suggestionList");

    inputField.addEventListener("input", () => {
      const prefix = inputField.value.trim();
      if (prefix === "") {
        suggestionList.innerHTML = "";
        return;
      }
      const suggestions = trie.startsWith(prefix);
      suggestionList.innerHTML = "";
      suggestions.forEach((word) => {
        const li = document.createElement("li");
        li.classList.add("suggestion-item", "rounded");
        li.textContent = word;
        li.addEventListener("click", () => {
          inputField.value = word;
          suggestionList.innerHTML = "";
        });
        suggestionList.appendChild(li);
      });
    });
  </script>
</body>
</html>